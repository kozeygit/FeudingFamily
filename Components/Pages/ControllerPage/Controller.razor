@page "/Controller"
@page "/Controller/{gameKey}"
@inherits ControllerPageBase
@using Microsoft.AspNetCore.SignalR.Client
@using FeudingFamily.Logic
@rendermode InteractiveServer

<PageTitle>Feuding Family - Controller</PageTitle>

<main>

    <ControllerQuestion Content="@Question.Content" IsRevealed="@Round.IsQuestionRevealed" OnClick="@RevealQuestion" />

    <div class="answers" id="answers">
        @for (int i = 0; i < Question.Answers.Count; i++)
        {
            var answer = Question.Answers[i];

            <ControllerAnswer IsRevealed=Round.IsAnswerRevealed[i] Ranking=answer.Ranking Content=@answer.Content
                Points=answer.Points OnClick="@(() => RevealAnswer(answer.Ranking))" />
        }
    </div>

    <div class="stats">
        <div id="wrong-answer">0</div>
        <div id="buzzer-active">‚ùå</div>
        <div id="round-points">9</div>
    </div>

    <div class="answer-btns">
        <ControllerButton TailwindStyle="bg-blue-300" OnClick=@(() => Console.WriteLine("DidShit"))>
            Wrong Answer
        </ControllerButton>

        <ControllerButton TailwindStyle="" OnClick=@(() => Console.WriteLine("DidShit"))>
            reveal question
        </ControllerButton>
    </div>
    <div class="buzzer-btns">
        <ControllerButton TailwindStyle="" OnClick=@(() => Console.WriteLine("DidShit"))>
            BUZZERS ON
        </ControllerButton>

        <ControllerButton TailwindStyle="" OnClick=@(() => Console.WriteLine("DidShit"))>
            BUZZERS OFF
        </ControllerButton>
    </div>

    <div class="btn-pair">
        <ControllerButton TailwindStyle="" OnClick=NewRound>
            New Round
        </ControllerButton>

        <ControllerButton TailwindStyle="" OnClick=@(() => Console.WriteLine("DidShit"))>
            WRONG BUZZER
        </ControllerButton>
    </div>

    <div class="sound-btns">
        <button class="sound-btn" onclick="play_sound('timer')" type="button">
            <p>Timer</p>
        </button>
        <button class="sound-btn" onclick="play_sound('intro')" type="button">
            <p>Intro</p>
        </button>
        <button class="sound-btn" onclick="play_sound('laugh')" type="button">
            <p>Laugh</p>
        </button>
        <button class="sound-btn" onclick="play_sound('hold')" type="button">
            <p>Hold</p>
        </button>
        <button class="sound-btn" onclick="countdown()" type="button">
            <p>Countdown</p>
        </button>
    </div>
    <div id="connection-status"></div>
</main>