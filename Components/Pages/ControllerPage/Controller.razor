@page "/Controller"
@page "/Controller/{gameKey}"
@inherits ControllerPageBase
@using Microsoft.AspNetCore.SignalR.Client
@using FeudingFamily.Logic

<PageTitle>Feuding Family - Controller</PageTitle>

<main>
    
    @{var questionRevealed = Round.IsQuestionRevealed ? "" : "hidden";}
    <div class="question @questionRevealed">
        <h1 class="question-content">@Question.Content</h1>
    </div>

    <div class="answers" id="answers">
        @for (int i = 0; i < Question.Answers.Count; i++)
        {
            var answer = Question.Answers[i];
            var revealed = Round.IsAnswerRevealed[i] ? "" : "hidden";

            <button class="answer @revealed" id="answer-@answer.Ranking" onclick="@Reveal(i)" type="button">
                <span class="answer-ranking">
                    @answer.Ranking
                </span>
                <span class="answer-content">
                    @answer.Content
                </span>
                <span class="answer-points">
                    @answer-Points
                </span>
            </button>
        }
    </div>

    <div class="stats">
        <div id="wrong-answer">{{ wrong_answers }}</div>
        <div id="buzzer-active">‚ùå</div>
        <div id="round-points">{{ total_points }}</div>
    </div>

    <div class="answer-btns">
        <button class="wrong-answer-btn" onclick="wrong_answer()" type="button">
            <p>Wrong Answer</p>
        </button>
        <button class="reveal-btn" onclick="reveal_question()" type="button">
            <p>reveal question</p>
        </button>
    </div>
    <div class="buzzer-btns">
        <button class="buzzer-btn" onclick="activate_buzzers()" type="button">
            <p>BUZZERS ON</p>
        </button>
        <button class="buzzer-btn" onclick="deactivate_buzzers()" type="button">
            <p>BUZZERS OFF</p>
        </button>
    </div>

    <div class="btn-pair">
        <button class="new_question-btn" onclick="new_question()" type="button">
            <p>New Question</p>
        </button>
        <button class="buzz-whenever" onclick="buzz_whenever()" type="button">
            <p>WRONG BUZZER</p>
        </button>
    </div>

    <div class="sound-btns">
        <button class="sound-btn" onclick="play_sound('timer')" type="button">
            <p>Timer</p>
        </button>
        <button class="sound-btn" onclick="play_sound('intro')" type="button">
            <p>Intro</p>
        </button>
        <button class="sound-btn" onclick="play_sound('laugh')" type="button">
            <p>Laugh</p>
        </button>
        <button class="sound-btn" onclick="play_sound('hold')" type="button">
            <p>Hold</p>
        </button>
        <button class="sound-btn" onclick="countdown()" type="button">
            <p>Countdown</p>
        </button>
    </div>
    <div id="connection-status"></div>
</main>